# Load systemd configuration
exec-once = systemctl --user import-environment DISPLAY WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user start hyprland-session.target

# startups
source = ~/.config/hypr/autostart.conf
source = ~/.config/hypr/bindkeys.conf
source = ~/.config/hypr/Dracula.conf
source = ~/.config/hypr/env.conf
source = ~/.config/hypr/exec.conf
source = ~/.config/hypr/hyprload.toml
source = ~/.config/hypr/rules.conf

monitor = eDP-1,2880x1880@90,0x0,1
workspace = eDP-1,1

general {
    apply_sens_to_raw = true
    no_cursor_warps = true
    
    gaps_in = 5
    gaps_out = 8
    
    border_size = 3
    no_border_on_floating = true
    
    layout = nstack
    resize_on_border = true
    extend_border_grab_area = 15
    hover_icon_on_border = true
    damage_tracking = full 	
}

decoration {
    rounding = 16
    
    active_opacity = 0.85
    inactive_opacity = 0.85
    fullscreen_opacity = 0.85

    blur {
      enabled = true
      size = 16
      passes = 5
      ignore_opacity = true
      new_optimizations = true
      xray = true
    }
    
    dim_inactive = true
    dim_strength = 0.2
    
}

input {
    kb_layout = us
    numlock_by_default = true
    sensitivity = 3.0
    repeat_rate = 25
    repeat_delay = 250
    accel_profile = adaptive
    scroll_method = 2fg
    natural_scroll = false
    follow_mouse = 1
    float_switch_override_focus = 2

    touchpad {
        disable_while_typing = true
        natural_scroll = false
        scroll_factor = 3.0
        tap_button_map = lmr
        middle_button_emulation = true
        clickfinger_behavior = true
        tap-to-click = true
        drag_lock = true
    }
}

misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    mouse_moves_enables_dpms = true
    animate_manual_resizes = true
    animate_manual_windowdragging = true
    focus_on_activate = true
    mouse_move_focuses_monitor = true
    enable_swallow = true
    swallow_regex = ^(alacritty)$
}

binds {
  allow_workspace_cycles = true
}

animations {
  enabled = true
  
  bezier = overshot, 0.19, 1.4, 0.25, 1
  bezier = overshot2, 0.19, 1.3, 0.25, 1
  bezier = smoothOut, 0.36, 0, 0.66, -0.56
  bezier = smoothIn, 0.25, 1, 0.5, 1
  
  animation = windows, 1, 5, overshot, slide
  animation = windowsIn, 1, 5, smoothIn, popin 30%
  animation = windowsOut, 1, 5, smoothOut, popin 80%
  animation = windowsMove, 1, 5, slide
  animation = border, 1, 5, default
  animation = fadeIn, 1, 5, default
  animation = fadeOut, 1, 5, default
  animation = fadeDim, 1, 10, defauly
  animation = workspaces, 1, 5, overshot2, slidevert
}

gestures {
  workspace_swipe = true
  workspace_swipe_cancel_ratio = 0.15
  workspace_swipe_fingers = 3
}

master {
  special_scale_factor = 0.8
  mfact = 0.47
  new_is_master = false
  new_on_top = true
  no_gaps_when_only = false
  orientation = center
  always_center_master = true
  inherit_fullscreen = true
}

plugin {
  nstack {
    layout {
      orientation = center
      center_single_master = true
      orientationhcenter = true
      new_on_top = true
      new_is_master = false
      no_gaps_when_only = false
      special_scale_factor = 0.8
      inherit_fullscreen = true
      stacks = 3
      mfact = 0.55
    }
  }
  hyprbars {
    buttons {
      bar_color = #282A36
      bar_height  15
      col.text = #FF79C6
      bar_text_size = 10
      bar_text_font = MonoLisa Nerd Font
      button_size = 11
      col.maximize = #50FA7B
      col.close = #FF5555
    }
  }
  hyprfocus {
    enabled = yes
    opacity = 0.7

    bezier = flashIn, 0.25,0.0,1.0,0.5
    bezier = flashOut, 0.36,0,0.66,-0.56

    flash_in_bezier = flashIn
    flash_in_speed = 2

    flash_out_bezier = flashOut
    flash_out_speed = 5
  }
  touch_gestures {
    sensitivity = 4.0
  }
  hycov {
    overview_gappo = 60 # gaps width from screen edge
    overview_gappi = 24 # gaps width from clients
    hotarea_size = 10 # hotarea size in bottom left,10x10
    enable_hotarea = 1 # enable mouse cursor hotarea     
    swipe_fingers = 4 # finger number of gesture,move any directory
    move_focus_distance = 100 # distance for movefocus,only can use 3 finger to move 
    enable_gesture = 0 # enable gesture
    disable_workspace_change = 0 # disable workspace change when in overview mode
    disable_spawn = 0 # disable bind exec when in overview mode
    auto_exit = 1 # enable auto exit when no client in overview
    auto_fullscreen = 0 # auto make active window maximize after exit overview
    only_active_workspace = 0 # only overview the active workspace
    only_active_monitor = 0 # only overview the active monitor
    enable_alt_release_exit = 0 # alt swith mode,see readme for detail
    alt_toggle_auto_next = 0 # auto focus next window when toggle overview in alt swith mode
  }
}

# Window Rules
windowrule = float, Rofi
windowrule = float, pavucontrol
windowrule = float, wpctl
windowrule = float, blueman
windowrule = float, eww  
windowrule = float, nm-connection-editor
windowrule = float, imv
windowrule = float, feh
windowrule = float, Viewnior

windowrule = tile, alacritty
windowrule = move 0 0, alacritty
windowrule = size 100% 100%, alacritty

windowrule = tile, kitty
windowrule = move 0 0, kitty
windowrule = size 100% 100%, kitty

windowrule = float, ^(wlogout)$
windowrule = move 0 0, wlogout
windowrule = size 100% 100%, wlogout
windowrule = animation slide, wlogout

windowrulev2 = float, class:^()$, title:^(Picture in picture)$
windowrulev2 = tile, class:^(vivaldi-stable)$ 
windowrulev2 = float, class:^(vivaldi-stable)$, title:^(Save File)$
windowrulev2 = float, class:^(vivaldi-stable)$, title:^(Open File)$
windowrulev2 = float, class:^(vivaldi-stable)$, title:^(Picture-in-Picture)$
windowrulev2 = float, class:^(blueman-manager)$

windowrulev2 = tile, class:^(Spotify)$
windowrulev2 = float, class:^(Spotify)$

# wob progress bar
$WOBSOCK = $XDG_RUNTIME_DIR/wob.sock
exec = rm -f $WOBSOCK && mkfifo $WOBSOCK && tail -f $WOBSOCK | wob


